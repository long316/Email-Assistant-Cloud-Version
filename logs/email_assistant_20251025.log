2025-10-25 15:04:54,659 - src.job_runner - INFO - 启动JobRunner，轮询间隔: 2秒
2025-10-25 15:04:54,664 - src.job_runner - INFO - JobRunner主循环已启动，开始轮询任务...
2025-10-25 15:04:54,664 - src.job_runner - INFO - JobRunner后台线程已启动
2025-10-25 15:04:54,772 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-25 15:04:54,773 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-25 15:05:46,355 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:05:46] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:05:54,798 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:05:54] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:05:56,963 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:05:56] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:06:16,636 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:06:16] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:06:20,668 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:06:20] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:18:25,588 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: Packet sequence number wrong - got 3 expected 4
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 681, in connect
    self._request_authentication()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 972, in _request_authentication
    auth_packet = self._process_auth(plugin_name, auth_packet)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1063, in _process_auth
    pkt = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 764, in _read_packet
    raise err.InternalError(
    ...<2 lines>...
    )
pymysql.err.InternalError: Packet sequence number wrong - got 3 expected 4
2025-10-25 15:21:54,243 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:21:54] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:21:58,649 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:21:58] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:22:50,443 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:22:50] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:22:54,784 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:22:54] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:22:56,057 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:22:56] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:23:03,307 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:23:03] "GET /api/template_files?master_user_id=admin&store_id=admin_524d2557 HTTP/1.1" 200 -
2025-10-25 15:23:12,166 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:23:12] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:25:16,809 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:25:16] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:25:22,511 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:25:22] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 15:26:02,950 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: Packet sequence number wrong - got 3 expected 4
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 681, in connect
    self._request_authentication()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 972, in _request_authentication
    auth_packet = self._process_auth(plugin_name, auth_packet)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1063, in _process_auth
    pkt = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 764, in _read_packet
    raise err.InternalError(
    ...<2 lines>...
    )
pymysql.err.InternalError: Packet sequence number wrong - got 3 expected 4
2025-10-25 15:30:34,491 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: Packet sequence number wrong - got 3 expected 4
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 681, in connect
    self._request_authentication()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 972, in _request_authentication
    auth_packet = self._process_auth(plugin_name, auth_packet)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1063, in _process_auth
    pkt = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 764, in _read_packet
    raise err.InternalError(
    ...<2 lines>...
    )
pymysql.err.InternalError: Packet sequence number wrong - got 3 expected 4
2025-10-25 15:31:38,172 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query (timed out)'), 1秒后重试...
2025-10-25 15:35:30,529 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:35:30] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:36:42,298 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:36:42] "[31m[1mGET /api/template_files/languages?master_user_id=admin&store_id=store HTTP/1.1[0m" 400 -
2025-10-25 15:36:42,300 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:36:42] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:36:42,310 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:36:42] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:44:42,255 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:44:42] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:47:14,908 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 15:47:47,840 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 15:48:02,727 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:48:02] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:48:02,729 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:48:02] "[31m[1mGET /api/template_files/languages?master_user_id=admin&store_id=store HTTP/1.1[0m" 400 -
2025-10-25 15:48:02,738 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:48:02] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:48:32,016 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:48:32] "[31m[1mGET /api/template_files/languages?master_user_id=admin&store_id=store HTTP/1.1[0m" 400 -
2025-10-25 15:48:32,020 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:48:32] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 15:48:32,030 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 15:48:32] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:03:38,097 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: Packet sequence number wrong - got 3 expected 4
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 681, in connect
    self._request_authentication()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 972, in _request_authentication
    auth_packet = self._process_auth(plugin_name, auth_packet)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1063, in _process_auth
    pkt = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 764, in _read_packet
    raise err.InternalError(
    ...<2 lines>...
    )
pymysql.err.InternalError: Packet sequence number wrong - got 3 expected 4
2025-10-25 16:06:39,206 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 16:18:47,503 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 16:19:28,046 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:19:28] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:19:50,261 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:19:50] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:19:50,278 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:19:50] "[31m[1mGET /api/template_files/languages?master_user_id=admin&store_id=store HTTP/1.1[0m" 400 -
2025-10-25 16:19:50,307 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:19:50] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:21:31,526 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 16:23:50,666 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:23:50] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:25:24,035 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:25:24] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:26:05,600 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:26:05] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:26:08,283 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:26:08] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:27:18,228 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:27:18] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:30:33,656 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:30:33] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:43:31,804 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 16:46:49,380 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 16:47:39,389 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 16:51:02,565 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:51:02] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:53:39,196 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:53:39] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:55:17,039 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:55:17] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 16:56:02,313 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 16:59:53,422 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 16:59:53] "GET /api/template_files?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:00:11,335 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:00:11] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:00:39,424 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:00:39] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:00:41,214 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:00:41] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:00:47,518 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:00:47] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:00:51,858 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:00:51] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:01:11,817 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:07:03,874 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:07:03] "[33mGET /api/v1/email/templates/all HTTP/1.1[0m" 404 -
2025-10-25 17:07:04,086 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:07:04] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-10-25 17:07:39,509 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:07:39] "GET /api/health HTTP/1.1" 200 -
2025-10-25 17:07:54,170 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:07:54] "GET /api/db/health HTTP/1.1" 200 -
2025-10-25 17:08:00,827 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:08:56,295 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:08:56] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:10:56,662 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:10:56] "GET /api/template_files/all?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 17:11:00,515 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:11:00] "GET /api/template_files/all?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 17:11:10,643 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:11:10] "GET /api/template_files/all?master_user_id=2&store_id=1 HTTP/1.1" 200 -
2025-10-25 17:11:13,433 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:11:13] "GET /api/template_files/all?master_user_id=2&store_id=1 HTTP/1.1" 200 -
2025-10-25 17:11:33,307 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:11:33] "GET /api/template_files/all?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 17:15:42,503 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:16:29,510 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:18:37,165 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:18:37] "GET /api/template_files?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 17:20:49,135 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query (timed out)'), 1秒后重试...
2025-10-25 17:20:52,690 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:20:57,237 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:20:57,237 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:21:01,800 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:21:05,353 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:21:25,915 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:21:25,916 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:21:30,480 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:21:34,038 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:21:38,592 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:21:38,593 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:21:43,149 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:22:02,706 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:22:07,279 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:22:07,279 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:22:11,856 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:22:15,434 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:22:19,997 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:22:19,997 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:22:40,559 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:22:44,123 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:22:48,690 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:22:48,691 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:22:53,264 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:22:56,829 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:23:01,379 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:23:01,380 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:23:05,937 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:23:09,505 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:23:30,056 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:23:30,057 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:23:34,620 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:23:38,187 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:23:58,756 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:23:58,756 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:24:19,295 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:24:22,860 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:24:27,418 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:24:27,419 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:24:31,991 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:24:35,546 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:24:40,103 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:24:40,104 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:25:00,661 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:25:20,208 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:25:24,764 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:25:24,765 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:25:29,323 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:25:32,881 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:25:37,436 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:25:37,436 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:26:09,455 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query (timed out)'), 1秒后重试...
2025-10-25 17:26:13,013 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:26:17,574 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:26:17,574 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:26:22,127 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:26:25,688 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:26:30,262 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:26:30,263 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:26:34,820 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:26:38,380 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:26:42,935 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:26:42,935 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:26:47,490 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:26:51,040 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:26:55,596 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:26:55,597 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:27:00,152 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:27:03,706 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:27:08,270 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:27:08,272 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:27:12,840 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:27:16,395 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:27:20,945 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:27:20,945 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:27:25,501 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:27:29,055 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:27:48,650 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:27:48,650 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:27:53,204 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:27:56,752 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:28:01,301 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:28:01,302 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:28:05,860 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:28:09,412 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:28:13,959 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:28:13,959 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:28:18,510 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:28:22,061 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:28:26,623 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:28:26,624 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:28:47,171 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:28:50,723 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:28:55,282 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:28:55,283 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:28:59,835 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:29:03,389 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:29:07,934 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:07,934 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:12,490 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:29:16,043 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:29:20,600 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:20,600 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:25,150 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:29:28,709 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:29:33,270 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:33,270 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:37,832 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:29:41,379 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:29:45,947 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:45,947 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:50,507 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:29:54,065 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:29:58,607 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:29:58,608 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:30:03,159 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:30:06,709 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:30:26,281 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:30:26,282 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:30:30,842 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:30:34,394 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:30:38,942 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:30:38,942 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:30:43,497 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:30:47,053 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:30:51,609 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:30:51,610 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:30:56,160 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:30:59,718 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:31:04,263 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:31:04,263 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:31:08,826 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:31:12,374 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:31:16,925 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:31:16,926 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:31:21,471 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:31:25,023 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:31:29,574 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:31:29,574 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:31:34,130 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:31:37,686 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:31:58,227 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:31:58,227 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:32:17,826 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:32:21,374 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:32:25,936 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:32:25,936 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:32:30,495 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:32:34,054 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:32:38,602 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:32:38,603 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:32:43,173 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:32:46,732 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:32:51,283 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:32:51,283 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:32:55,844 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:32:59,392 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:33:03,939 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:33:03,940 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:33:08,490 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:33:12,041 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:33:16,597 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:33:16,597 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:33:21,150 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:33:24,701 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:33:29,248 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:33:29,248 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:33:33,806 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:33:53,352 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:33:57,916 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:33:57,917 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:34:02,475 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:34:06,047 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:34:10,616 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:34:10,617 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:34:15,172 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:34:18,720 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:34:23,282 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:34:23,282 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:34:44,839 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:34:48,385 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:34:52,935 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:34:52,936 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:34:57,480 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:35:01,033 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:35:21,577 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:35:21,578 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:35:26,133 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:35:29,689 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:35:34,244 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:35:34,245 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:35:38,638 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:35:38] "GET /api/template_files/en?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 17:35:38,808 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:35:42,356 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:35:46,897 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:35:46,898 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:35:51,494 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:35:55,038 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:35:59,590 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:35:59,591 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:36:04,157 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:36:09,084 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:36:09] "GET /api/template_files/all HTTP/1.1" 200 -
2025-10-25 17:36:35,196 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query (timed out)'), 2秒后重试...
2025-10-25 17:36:39,749 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:36:39,749 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:36:44,338 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:36:47,895 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:36:52,453 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:36:52,454 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:36:57,012 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:37:00,569 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:37:21,121 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:37:21,122 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:37:25,683 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:37:45,236 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:37:49,796 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:37:49,797 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:37:54,366 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:37:57,934 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:38:18,489 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:38:18,490 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:38:23,054 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:38:26,609 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:38:31,166 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:38:31,167 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:38:35,732 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:38:39,281 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:38:43,851 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:38:43,852 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:38:48,417 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:38:51,975 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 17:38:56,519 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:38:56,520 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 255, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=30,        # 写入超时30秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 17:45:50,158 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 17:48:14,890 - src.job_runner - INFO - 启动JobRunner，轮询间隔: 2秒
2025-10-25 17:48:14,892 - src.job_runner - INFO - JobRunner主循环已启动，开始轮询任务...
2025-10-25 17:48:14,892 - src.job_runner - INFO - JobRunner后台线程已启动
2025-10-25 17:48:14,968 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-25 17:48:14,968 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-25 17:48:34,979 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:48:34] "GET /api/template_files/all HTTP/1.1" 200 -
2025-10-25 17:48:37,273 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:48:37] "GET /api/template_files/all HTTP/1.1" 200 -
2025-10-25 17:48:37,943 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:48:37] "GET /api/template_files/all HTTP/1.1" 200 -
2025-10-25 17:48:48,577 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:48:48] "GET /api/template_files/all HTTP/1.1" 200 -
2025-10-25 17:49:32,739 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:49:32] "GET /api/template_files/all?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 17:49:54,958 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:49:54] "GET /api/template_files/en?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 17:50:08,464 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:50:08] "GET /api/template_files/all HTTP/1.1" 200 -
2025-10-25 17:50:44,993 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:50:44] "GET /api/template_files/all?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 17:51:15,418 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:51:15] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:51:23,872 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:51:23] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:52:58,349 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:52:58] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:53:10,913 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:53:10] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:53:17,261 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:53:17] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:58:00,731 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:58:00] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:58:31,891 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:58:31] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:58:51,583 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:58:51] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 17:58:54,733 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 17:58:54] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:01:12,683 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:01:12] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:01:14,183 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:01:14] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:01:50,760 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:01:50] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:02:12,476 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:02:12] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:03:39,981 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:03:39] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:06:20,967 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:06:20] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=content HTTP/1.1" 200 -
2025-10-25 18:06:21,849 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:06:21] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:06:30,554 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:06:30] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:06:32,322 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:06:32] "GET /api/template_files/en?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:09:19,157 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:09:19] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:10:56,462 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 18:19:11,403 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:19:11] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:19:24,239 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:19:24] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=content HTTP/1.1" 200 -
2025-10-25 18:19:25,158 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:19:25] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:20:34,278 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:20:34] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:20:49,389 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:20:49] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:20:53,239 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:20:53] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=content HTTP/1.1" 200 -
2025-10-25 18:20:54,137 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:20:54] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:21:30,515 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:21:30] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=subject HTTP/1.1" 200 -
2025-10-25 18:21:31,481 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:21:31] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:21:40,131 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:21:40] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:22:36,991 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:22:36] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:22:40,846 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:22:40] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=content HTTP/1.1" 200 -
2025-10-25 18:22:41,831 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:22:41] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:22:46,019 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:22:46] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:23:58,607 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 18:25:01,962 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:25:01] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:25:04,644 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:25:04] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:25:09,363 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:25:09] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:25:50,869 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:25:50] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:25:54,245 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:25:54] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=subject HTTP/1.1" 200 -
2025-10-25 18:25:55,592 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:25:55] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:26:59,869 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query (timed out)'), 1秒后重试...
2025-10-25 18:27:14,644 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 18:31:55,101 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:31:55] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:31:59,817 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:31:59] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:32:03,096 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:32:03] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 18:32:07,974 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:32:07] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 18:32:23,154 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:32:23] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:32:28,184 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:32:28] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:32:30,636 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:32:30] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 18:32:35,742 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:32:35] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 18:33:16,243 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:33:16] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:33:22,863 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:33:22] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 18:40:15,446 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:40:15] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:40:25,783 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:40:25] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:40:26,864 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:40:26] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 18:40:31,741 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:40:31] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 18:40:32,077 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:40:32] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 18:40:33,567 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 18:40:33] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 18:41:07,846 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 18:41:11,438 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 18:43:27,949 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 18:45:24,220 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 19:36:58,551 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query (timed out)'), 1秒后重试...
2025-10-25 19:37:41,626 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 19:39:24,183 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 19:44:18,817 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:44:18] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 19:44:28,717 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:44:28] "POST /api/template_files HTTP/1.1" 200 -
2025-10-25 19:44:29,547 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:44:29] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 19:47:35,869 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:47:35] "POST /api/template_files HTTP/1.1" 200 -
2025-10-25 19:47:36,692 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:47:36] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 19:48:05,785 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:48:05] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 19:48:11,369 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:48:11] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 19:49:29,374 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 19:49:48,769 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2003, "Can't connect to MySQL server on '120.25.232.16' (timed out)"), 1秒后重试...
2025-10-25 19:54:42,987 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:54:42] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 19:54:43,290 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:54:43] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 19:54:47,431 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:54:47] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 19:54:47,651 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:54:47] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 19:54:57,715 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:54:57] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 19:54:57,870 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:54:57] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 19:57:51,978 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:57:51] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 19:57:55,204 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:57:55] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=subject HTTP/1.1" 200 -
2025-10-25 19:57:55,285 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:57:55] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 19:57:56,915 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:57:56] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=content HTTP/1.1" 200 -
2025-10-25 19:57:56,967 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:57:56] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 19:58:02,520 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:58:02] "POST /api/template_files HTTP/1.1" 200 -
2025-10-25 19:58:02,626 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:58:02] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 19:58:05,464 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:58:05] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 19:59:59,968 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 19:59:59] "POST /api/template_files HTTP/1.1" 200 -
2025-10-25 20:00:00,016 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:00:00] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:05:44,520 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:05:44] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:06:45,160 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:06:45] "DELETE /api/template_files/jp?master_user_id=admin&store_id=store&kind=subject HTTP/1.1" 200 -
2025-10-25 20:06:45,315 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:06:45] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:06:46,788 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:06:46] "DELETE /api/template_files/en?master_user_id=admin&store_id=store&kind=content HTTP/1.1" 200 -
2025-10-25 20:06:46,884 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:06:46] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:06:51,325 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:06:51] "[31m[1mPOST /api/template_files HTTP/1.1[0m" 400 -
2025-10-25 20:06:55,761 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:06:55] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:07:00,515 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:07:00] "POST /api/template_files HTTP/1.1" 200 -
2025-10-25 20:07:00,555 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:07:00] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:07:05,638 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:07:05] "[31m[1mPOST /api/template_files HTTP/1.1[0m" 400 -
2025-10-25 20:11:26,033 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:11:26] "DELETE /api/template_files/jp?master_user_id=admin&store_id=store&kind=subject HTTP/1.1" 200 -
2025-10-25 20:11:26,283 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:11:26] "DELETE /api/template_files/jp?master_user_id=admin&store_id=store&kind=subject HTTP/1.1" 200 -
2025-10-25 20:11:26,447 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:11:26] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:11:29,866 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:11:29] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:11:46,159 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:11:46] "[31m[1mPOST /api/template_files HTTP/1.1[0m" 400 -
2025-10-25 20:18:15,100 - src.job_runner - INFO - 启动JobRunner，轮询间隔: 2秒
2025-10-25 20:18:15,102 - src.job_runner - INFO - JobRunner主循环已启动，开始轮询任务...
2025-10-25 20:18:15,102 - src.job_runner - INFO - JobRunner后台线程已启动
2025-10-25 20:18:15,124 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-25 20:18:15,124 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-25 20:18:52,175 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:18:52] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:18:52,350 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:18:52] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:18:58,343 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:18:58] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:19:04,825 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:19:04] "POST /api/template_files HTTP/1.1" 200 -
2025-10-25 20:19:04,897 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:19:04] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:19:10,758 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:19:10] "POST /api/template_files HTTP/1.1" 200 -
2025-10-25 20:19:10,829 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:19:10] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:19:18,167 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:19:18] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 20:19:19,414 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:19:19] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 20:24:14,878 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:24:14] "GET /api/senders?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 20:24:15,180 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:24:15] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 20:24:15,727 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:24:15] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 20:24:44,038 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:24:44] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 20:24:48,158 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:24:48] "POST /api/jobs/send_template_emails HTTP/1.1" 200 -
2025-10-25 20:24:48,452 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:24:48] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 20:24:49,998 - src.job_runner - INFO - 🔍 发现待处理任务: job_id=ceca9d69-714d-4c89-a8d7-409613b98c89, type=template, sender=johnloneyy@gmail.com
2025-10-25 20:24:50,630 - src.job_runner - INFO - ✅ 成功认领任务 ceca9d69-714d-4c89-a8d7-409613b98c89，开始执行邮件发送...
2025-10-25 20:24:57,293 - src.gmail_auth - INFO - 加载已存在的认证文件: token_johnloneyy_gmail_com.json
2025-10-25 20:25:00,051 - src.gmail_auth - INFO - 刷新认证token成功: johnloneyy@gmail.com
2025-10-25 20:25:00,052 - src.gmail_auth - INFO - 认证凭据已保存: token_johnloneyy_gmail_com.json
2025-10-25 20:25:00,059 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-10-25 20:25:00,084 - src.gmail_auth - INFO - Gmail服务初始化成功: johnloneyy@gmail.com
2025-10-25 20:25:00,268 - src.email_scheduler - INFO - 📧 [1/1] 开始发送邮件到: junoliii98@gmail.com (recipient_id=44)
2025-10-25 20:25:21,863 - src.email_scheduler - ERROR - ❌ [1/1] 邮件发送异常: junoliii98@gmail.com, 错误: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
Traceback (most recent call last):
  File "D:\Email Assistant\src\email_scheduler.py", line 885, in send_job_emails_from_db
    .execute()
     ~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\googleapiclient\_helpers.py", line 130, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "D:\Email Assistant\.venv\Lib\site-packages\googleapiclient\http.py", line 923, in execute
    resp, content = _retry_request(
                    ~~~~~~~~~~~~~~^
        http,
        ^^^^^
    ...<7 lines>...
        headers=self.headers,
        ^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Email Assistant\.venv\Lib\site-packages\googleapiclient\http.py", line 222, in _retry_request
    raise exception
  File "D:\Email Assistant\.venv\Lib\site-packages\googleapiclient\http.py", line 191, in _retry_request
    resp, content = http.request(uri, method, *args, **kwargs)
                    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Email Assistant\.venv\Lib\site-packages\google_auth_httplib2.py", line 218, in request
    response, content = self.http.request(
                        ~~~~~~~~~~~~~~~~~^
        uri,
        ^^^^
    ...<5 lines>...
        **kwargs
        ^^^^^^^^
    )
    ^
  File "D:\Email Assistant\.venv\Lib\site-packages\httplib2\__init__.py", line 1727, in request
    (response, content) = self._request(
                          ~~~~~~~~~~~~~^
        conn, authority, uri, request_uri, method, body, headers, redirections, cachekey,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "D:\Email Assistant\.venv\Lib\site-packages\httplib2\__init__.py", line 1447, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
                          ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Email Assistant\.venv\Lib\site-packages\httplib2\__init__.py", line 1369, in _conn_request
    conn.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\httplib2\__init__.py", line 1159, in connect
    sock.connect((self.host, self.port))
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
TimeoutError: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
2025-10-25 20:25:25,421 - src.job_runner - INFO - 🎉 任务 ceca9d69-714d-4c89-a8d7-409613b98c89 执行完成
2025-10-25 20:25:37,515 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2003, "Can't connect to MySQL server on '120.25.232.16' (timed out)"), 1秒后重试...
2025-10-25 20:30:14,040 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 20:31:45,859 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 20:33:24,478 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:33:24] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 20:33:30,453 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:33:30] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 20:33:45,597 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:33:45] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 20:33:51,621 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:33:51] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 20:33:52,045 - src.job_runner - INFO - 🔍 发现待处理任务: job_id=3ba84b70-434c-4ab1-95d9-0c60fdfbef57, type=template, sender=johnloneyy@gmail.com
2025-10-25 20:33:55,946 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:33:55] "POST /api/jobs/send_template_emails HTTP/1.1" 200 -
2025-10-25 20:33:56,061 - src.job_runner - INFO - ✅ 成功认领任务 3ba84b70-434c-4ab1-95d9-0c60fdfbef57，开始执行邮件发送...
2025-10-25 20:34:17,611 - src.gmail_auth - INFO - 加载已存在的认证文件: token_johnloneyy_gmail_com.json
2025-10-25 20:34:17,612 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-10-25 20:34:17,617 - src.gmail_auth - INFO - Gmail服务初始化成功: johnloneyy@gmail.com
2025-10-25 20:34:21,279 - src.email_scheduler - INFO - 📧 [1/1] 开始发送邮件到: junoliii98@gmail.com (recipient_id=45)
2025-10-25 20:34:32,794 - src.email_scheduler - INFO - ✅ [1/1] 邮件发送成功: junoliii98@gmail.com, message_id=19a1b5d076b709e2
2025-10-25 20:34:57,257 - src.job_runner - INFO - 🎉 任务 3ba84b70-434c-4ab1-95d9-0c60fdfbef57 执行完成
2025-10-25 20:35:58,030 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:35:58] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 20:36:03,754 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:36:03] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 20:43:01,604 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 20:43:43,098 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:43:43] "[33mPOST /api/v1/webhook/email-events HTTP/1.1[0m" 404 -
2025-10-25 20:45:11,858 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 20:50:18,763 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 257, in get_next_queued_job
    cur.execute(sql)
    ~~~~~~~~~~~^^^^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
    ~~~~~~~~~~^^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 575, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 826, in _read_query_result
    result.read()
    ~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1203, in read
    first_packet = self.connection._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 20:58:12,779 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:58:12] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 20:58:19,087 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 20:58:19] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:04:32,352 - src.job_runner - INFO - 启动JobRunner，轮询间隔: 2秒
2025-10-25 21:04:32,353 - src.job_runner - INFO - JobRunner主循环已启动，开始轮询任务...
2025-10-25 21:04:32,353 - src.job_runner - INFO - JobRunner后台线程已启动
2025-10-25 21:04:32,376 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-25 21:04:32,376 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-25 21:06:31,666 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:06:35,214 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:06:39,759 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:06:39,760 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:06:42,305 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:06:45,853 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:06:50,393 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:06:50,394 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:06:54,952 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:06:58,497 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:07:03,043 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:07:03,043 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:07:05,590 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:07:09,137 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:07:13,691 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:07:13,692 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:07:18,245 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:07:21,795 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:07:58,330 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:07:58,331 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:08:16,870 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:08:20,429 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:08:24,974 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:08:24,975 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:08:29,528 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:08:33,078 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:08:37,633 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:08:37,633 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:08:40,189 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:08:43,743 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:09:06,348 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:09:06,349 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:09:10,910 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:09:14,456 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:09:34,991 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:09:34,991 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:09:37,543 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:09:41,088 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:09:45,639 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:09:45,640 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:09:50,192 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:10:46,401 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:10:50,959 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:10:50,959 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:10:53,505 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:10:57,061 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:11:01,617 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:11:01,618 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:11:06,187 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:11:09,746 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:11:30,294 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:11:30,294 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:11:48,836 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:11:52,392 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:11:56,947 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:11:56,948 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:12:01,523 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:12:12,113 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:12:16,690 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:12:16,691 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:12:19,239 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:12:22,809 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:12:43,381 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:12:43,382 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:12:47,953 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:12:51,523 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:12:56,103 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:12:56,104 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:12:58,687 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:13:02,270 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-25 21:13:22,832 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:13:22,832 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:13:41,316 - src.job_runner - INFO - 启动JobRunner，轮询间隔: 2秒
2025-10-25 21:13:41,317 - src.job_runner - INFO - JobRunner主循环已启动，开始轮询任务...
2025-10-25 21:13:41,317 - src.job_runner - INFO - JobRunner后台线程已启动
2025-10-25 21:13:41,357 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-25 21:13:41,358 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-25 21:14:14,610 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-25 21:16:14,809 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:16:14] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:16:21,542 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:16:21] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:16:28,263 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:16:28] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:16:33,135 - src.job_runner - INFO - 🔍 发现待处理任务: job_id=f5628eb8-6fbe-4ef2-9eaf-b76c1542129c, type=template, sender=johnloneyy@gmail.com
2025-10-25 21:16:35,282 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:16:35] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:16:37,455 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:16:37] "POST /api/jobs/send_template_emails HTTP/1.1" 200 -
2025-10-25 21:16:37,555 - src.job_runner - INFO - ✅ 成功认领任务 f5628eb8-6fbe-4ef2-9eaf-b76c1542129c，开始执行邮件发送...
2025-10-25 21:17:03,229 - src.gmail_auth - INFO - 加载已存在的认证文件: token_johnloneyy_gmail_com.json
2025-10-25 21:17:03,234 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-10-25 21:17:03,240 - src.gmail_auth - INFO - Gmail服务初始化成功: johnloneyy@gmail.com
2025-10-25 21:17:09,608 - src.email_scheduler - INFO - 📧 [1/1] 开始发送邮件到: junoliii98@gmail.com (recipient_id=46)
2025-10-25 21:17:22,448 - src.email_scheduler - INFO - ✅ [1/1] 邮件发送成功: junoliii98@gmail.com, message_id=19a1b843b296327f
2025-10-25 21:17:52,558 - src.job_runner - INFO - 🎉 任务 f5628eb8-6fbe-4ef2-9eaf-b76c1542129c 执行完成
2025-10-25 21:19:50,791 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:25:58,903 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:25:58] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:26:06,998 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:26:06] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:26:29,988 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:26:29] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:26:37,584 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:26:37] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:26:42,683 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:26:42] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:27:04,248 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:27:04] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:27:06,838 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:27:06] "POST /api/jobs/send_template_emails HTTP/1.1" 200 -
2025-10-25 21:27:09,093 - src.job_runner - INFO - 🔍 发现待处理任务: job_id=0dc647ba-d8a1-4925-a23f-d2435a32d430, type=template, sender=johnloneyy@gmail.com
2025-10-25 21:27:19,717 - src.job_runner - INFO - ✅ 成功认领任务 0dc647ba-d8a1-4925-a23f-d2435a32d430，开始执行邮件发送...
2025-10-25 21:27:47,818 - src.gmail_auth - INFO - 加载已存在的认证文件: token_johnloneyy_gmail_com.json
2025-10-25 21:27:49,381 - src.gmail_auth - INFO - 刷新认证token成功: johnloneyy@gmail.com
2025-10-25 21:27:49,384 - src.gmail_auth - INFO - 认证凭据已保存: token_johnloneyy_gmail_com.json
2025-10-25 21:27:49,392 - googleapiclient.discovery_cache - INFO - file_cache is only supported with oauth2client<4.0.0
2025-10-25 21:27:49,401 - src.gmail_auth - INFO - Gmail服务初始化成功: johnloneyy@gmail.com
2025-10-25 21:27:54,197 - src.email_scheduler - INFO - 📧 [1/1] 开始发送邮件到: junoliii98@gmail.com (recipient_id=47)
2025-10-25 21:28:06,219 - src.email_scheduler - INFO - ✅ [1/1] 邮件发送成功: junoliii98@gmail.com, message_id=19a1b8e0f51c8e80
2025-10-25 21:28:37,178 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:28:37] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:28:39,366 - src.job_runner - INFO - 🎉 任务 0dc647ba-d8a1-4925-a23f-d2435a32d430 执行完成
2025-10-25 21:28:46,827 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:28:46] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:32:33,449 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:32:33] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:32:58,819 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:32:58] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:32:59,061 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:32:59] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:33:33,874 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:33:33] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:34:06,643 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:34:06] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=pics HTTP/1.1" 200 -
2025-10-25 21:34:56,413 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:35:52,376 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:35:52] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:36:27,467 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:36:34,714 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:36:34] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:36:59,136 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:40:55,391 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:41:12,867 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:41:12] "POST /api/assets HTTP/1.1" 200 -
2025-10-25 21:41:22,533 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:41:22] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:41:41,545 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:41:41] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:41:44,192 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:41:44] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:41:46,878 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:41:46] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 21:41:53,959 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 21:41:53] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 21:53:57,869 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:56:19,633 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 21:58:59,114 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 22:00:51,132 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 22:04:24,418 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:04:24] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:04:50,827 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:04:50] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 22:08:32,792 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:08:32] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:08:41,936 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:08:41] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 22:08:43,046 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:08:43] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 22:15:50,017 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:15:50] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=image HTTP/1.1" 200 -
2025-10-25 22:16:52,597 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:16:52] "[33mGET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1[0m" 404 -
2025-10-25 22:18:11,047 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:18:11] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:18:12,812 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:18:12] "[33mGET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1[0m" 404 -
2025-10-25 22:20:21,432 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:20:21] "[33mGET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1[0m" 404 -
2025-10-25 22:20:24,789 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:20:24] "GET /api/assets?master_user_id=admin&store_id=store&asset_type=attachment HTTP/1.1" 200 -
2025-10-25 22:20:36,542 - src.job_runner - INFO - 启动JobRunner，轮询间隔: 2秒
2025-10-25 22:20:36,543 - src.job_runner - INFO - JobRunner主循环已启动，开始轮询任务...
2025-10-25 22:20:36,543 - src.job_runner - INFO - JobRunner后台线程已启动
2025-10-25 22:20:36,567 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2025-10-25 22:20:36,568 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-10-25 22:21:00,269 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 22:21:14,518 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:21:14] "GET /api/files/attachments?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:21:16,414 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:21:16] "GET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:21:31,208 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 22:21:40,588 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:21:40] "[35m[1mGET /api/files/pics/captcha.png?master_user_id=admin&store_id=store&download=True HTTP/1.1[0m" 500 -
2025-10-25 22:27:00,501 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:27:00] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:27:24,383 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:27:24] "GET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:31:27,833 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:31:27] "GET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:32:15,796 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:32:15] "[35m[1mGET /api/files/pics/captcha.png?master_user_id=admin&store_id=store HTTP/1.1[0m" 500 -
2025-10-25 22:32:23,707 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:32:23] "GET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:32:28,306 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:32:28] "[35m[1mGET /api/files/pics/captcha.png?master_user_id=admin&store_id=store HTTP/1.1[0m" 500 -
2025-10-25 22:33:07,051 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:33:07] "[35m[1mGET /api/files/pics/captcha.png?master_user_id=admin&store_id=store HTTP/1.1[0m" 500 -
2025-10-25 22:33:10,471 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:33:10] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:33:13,460 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:33:13] "GET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:33:26,384 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:33:26] "GET /api/template_files/all?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:33:35,709 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:33:35] "GET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 22:33:38,129 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:33:38] "[35m[1mGET /api/files/pics/captcha.png?master_user_id=admin&store_id=store HTTP/1.1[0m" 500 -
2025-10-25 22:34:33,749 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:34:33] "GET /api/template_files/all?master_user_id=1&store_id=2 HTTP/1.1" 200 -
2025-10-25 22:35:12,870 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 22:35:12] "[35m[1mGET /api/files/pics/captcha.png?master_user_id=admin&store_id=store HTTP/1.1[0m" 500 -
2025-10-25 22:38:23,595 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 22:47:18,938 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query ([WinError 10054] 远程主机强迫关闭了一个现有的连接。)'), 1秒后重试...
2025-10-25 22:47:20,116 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2003, "Can't connect to MySQL server on '120.25.232.16' ([WinError 10051] 向一个无法连接的网络尝试了一个套接字操作。)"), 2秒后重试...
2025-10-25 23:53:12,719 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-25 23:53:22,714 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 23:53:22] "GET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 23:53:31,338 - werkzeug - INFO - 127.0.0.1 - - [25/Oct/2025 23:53:31] "GET /api/files/pics?master_user_id=admin&store_id=store HTTP/1.1" 200 -
2025-10-25 23:53:55,303 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-26 13:36:33,868 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query ([WinError 10054] 远程主机强迫关闭了一个现有的连接。)')
2025-10-26 14:09:16,780 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-26 14:09:20,601 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-26 14:09:25,891 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-26 14:09:25,892 - src.dao_mysql - WARNING - 查询过程中数据库连接丢失，准备重试一次: (2013, 'Lost connection to MySQL server during query')
2025-10-26 14:09:29,106 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-26 14:09:32,650 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query'), 2秒后重试...
2025-10-26 14:09:37,319 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2013, 'Lost connection to MySQL server during query')
2025-10-26 14:09:37,320 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2013, 'Lost connection to MySQL server during query')
Traceback (most recent call last):
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 280, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 680, in connect
    self._get_server_information()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 1099, in _get_server_information
    packet = self._read_packet()
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 751, in _read_packet
    packet_header = self._read_bytes(4)
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 805, in _read_bytes
    raise err.OperationalError(
        CR.CR_SERVER_LOST, "Lost connection to MySQL server during query"
    )
pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query')
2025-10-26 14:09:42,393 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-26 14:09:46,472 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2013, 'Lost connection to MySQL server during query ([WinError 10054] 远程主机强迫关闭了一个现有的连接。)'), 2秒后重试...
2025-10-26 14:09:48,487 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2003, "Can't connect to MySQL server on '120.25.232.16' ([WinError 10065] 套接字操作尝试一个无法连接的主机。)")
2025-10-26 14:09:48,488 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2003, "Can't connect to MySQL server on '120.25.232.16' ([WinError 10065] 套接字操作尝试一个无法连接的主机。)")
Traceback (most recent call last):
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 661, in connect
    sock = socket.create_connection(
        (self.host, self.port), self.connect_timeout, **kwargs
    )
  File "C:\Users\86166\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 864, in create_connection
    raise exceptions[0]
  File "C:\Users\86166\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 849, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
OSError: [WinError 10065] 套接字操作尝试一个无法连接的主机。

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 723, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on '120.25.232.16' ([WinError 10065] 套接字操作尝试一个无法连接的主机。)")
2025-10-26 14:09:50,495 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2003, "Can't connect to MySQL server on '120.25.232.16' ([WinError 10065] 套接字操作尝试一个无法连接的主机。)"), 1秒后重试...
2025-10-26 14:09:51,497 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 2/3): (2003, "Can't connect to MySQL server on '120.25.232.16' ([WinError 10065] 套接字操作尝试一个无法连接的主机。)"), 2秒后重试...
2025-10-26 14:10:03,517 - src.dao_mysql - ERROR - 数据库连接失败，已重试3次: (2003, "Can't connect to MySQL server on '120.25.232.16' (timed out)")
2025-10-26 14:10:03,517 - src.job_runner - ERROR - ❌ JobRunner循环发生异常: (2003, "Can't connect to MySQL server on '120.25.232.16' (timed out)")
Traceback (most recent call last):
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 661, in connect
    sock = socket.create_connection(
        (self.host, self.port), self.connect_timeout, **kwargs
    )
  File "C:\Users\86166\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 864, in create_connection
    raise exceptions[0]
  File "C:\Users\86166\AppData\Local\Programs\Python\Python313\Lib\socket.py", line 849, in create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\Email Assistant\src\job_runner.py", line 45, in _loop
    job = get_next_queued_job()
  File "D:\Email Assistant\src\dao_mysql.py", line 262, in get_next_queued_job
    with _conn() as conn:
         ~~~~~^^
  File "D:\Email Assistant\src\dao_mysql.py", line 33, in _conn
    conn = pymysql.connect(
        host=u.hostname or "127.0.0.1",
    ...<10 lines>...
        write_timeout=60,        # 写入超时60秒
    )
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 365, in __init__
    self.connect()
    ~~~~~~~~~~~~^^
  File "D:\Email Assistant\.venv\Lib\site-packages\pymysql\connections.py", line 723, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on '120.25.232.16' (timed out)")
2025-10-26 14:10:15,539 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2003, "Can't connect to MySQL server on '120.25.232.16' (timed out)"), 1秒后重试...
2025-10-26 14:34:34,068 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-26 14:36:19,635 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
2025-10-26 14:42:57,203 - src.dao_mysql - WARNING - 数据库连接失败 (尝试 1/3): (2013, 'Lost connection to MySQL server during query'), 1秒后重试...
